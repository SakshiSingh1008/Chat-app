{"ast":null,"code":"import'./App.css';import Dashboard from'./modules/Dashboard';import Form from'./modules/form';import{Routes,Route,Navigate,useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,auth=false}=_ref;const isLoggedIn=localStorage.getItem(\"user:token\")!==null;const location=useLocation();// Get current location for redirecting\nconsole.log(\"isLoggedIn:\",isLoggedIn);console.log(\"auth required for this route:\",auth);console.log(\"current path:\",location.pathname);if(!isLoggedIn&&auth){console.log(\"Redirecting to sign-in\");return/*#__PURE__*/_jsx(Navigate,{to:\"/users/sign-in\",state:{from:location}});}if(isLoggedIn&&['/users/sign-in','/users/sign-up'].includes(location.pathname)){console.log(\"Redirecting to dashboard\");return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return children;};function App(){return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{auth:true,children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/users/sign-in\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Form,{isSignInPage:true})})}),/*#__PURE__*/_jsx(Route,{path:\"/users/sign-up\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Form,{isSignInPage:false})})})]});}export default App;","map":{"version":3,"names":["Dashboard","Form","Routes","Route","Navigate","useLocation","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","auth","isLoggedIn","localStorage","getItem","location","console","log","pathname","to","state","from","includes","App","path","element","isSignInPage"],"sources":["C:/Users/itzsa/chatapp/client/src/App.js"],"sourcesContent":["import './App.css';\nimport Dashboard from './modules/Dashboard';\nimport Form from './modules/form';\nimport { Routes, Route, Navigate ,useLocation} from 'react-router-dom';\n\nconst ProtectedRoute = ({ children, auth = false }) => {\n  const isLoggedIn = localStorage.getItem(\"user:token\") !== null;\n  const location = useLocation(); // Get current location for redirecting\n\n  console.log(\"isLoggedIn:\", isLoggedIn);\n  console.log(\"auth required for this route:\", auth);\n  console.log(\"current path:\", location.pathname);\n\n  if (!isLoggedIn && auth) {\n    console.log(\"Redirecting to sign-in\");\n    return <Navigate to='/users/sign-in' state={{ from: location }} />;\n  }\n\n  if (isLoggedIn && ['/users/sign-in', '/users/sign-up'].includes(location.pathname)) {\n    console.log(\"Redirecting to dashboard\");\n    return <Navigate to='/' />;\n  }\n\n  return children;\n};\n\nfunction App() {\n  return (\n    <Routes>\n      <Route\n        path='/'\n        element={\n          <ProtectedRoute auth={true}>\n            <Dashboard />\n          </ProtectedRoute>\n        }\n      />\n      <Route\n        path='/users/sign-in'\n        element={\n          <ProtectedRoute>\n            <Form isSignInPage={true} />\n          </ProtectedRoute>\n        }\n      />\n      <Route\n        path='/users/sign-up'\n        element={\n          <ProtectedRoute>\n            <Form isSignInPage={false} />\n          </ProtectedRoute>\n        }\n      />\n    </Routes>\n  );\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,WAAW,CAClB,MAAO,CAAAA,SAAS,KAAM,qBAAqB,CAC3C,MAAO,CAAAC,IAAI,KAAM,gBAAgB,CACjC,OAASC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,WAAW,KAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvE,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,QAAQ,CAAEC,IAAI,CAAG,KAAM,CAAC,CAAAF,IAAA,CAChD,KAAM,CAAAG,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,GAAK,IAAI,CAC9D,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAAE;AAEhCa,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEL,UAAU,CAAC,CACtCI,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEN,IAAI,CAAC,CAClDK,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEF,QAAQ,CAACG,QAAQ,CAAC,CAE/C,GAAI,CAACN,UAAU,EAAID,IAAI,CAAE,CACvBK,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrC,mBAAOZ,IAAA,CAACH,QAAQ,EAACiB,EAAE,CAAC,gBAAgB,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEN,QAAS,CAAE,CAAE,CAAC,CACpE,CAEA,GAAIH,UAAU,EAAI,CAAC,gBAAgB,CAAE,gBAAgB,CAAC,CAACU,QAAQ,CAACP,QAAQ,CAACG,QAAQ,CAAC,CAAE,CAClFF,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACvC,mBAAOZ,IAAA,CAACH,QAAQ,EAACiB,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CAEA,MAAO,CAAAT,QAAQ,CACjB,CAAC,CAED,QAAS,CAAAa,GAAGA,CAAA,CAAG,CACb,mBACEhB,KAAA,CAACP,MAAM,EAAAU,QAAA,eACLL,IAAA,CAACJ,KAAK,EACJuB,IAAI,CAAC,GAAG,CACRC,OAAO,cACLpB,IAAA,CAACG,cAAc,EAACG,IAAI,CAAE,IAAK,CAAAD,QAAA,cACzBL,IAAA,CAACP,SAAS,GAAE,CAAC,CACC,CACjB,CACF,CAAC,cACFO,IAAA,CAACJ,KAAK,EACJuB,IAAI,CAAC,gBAAgB,CACrBC,OAAO,cACLpB,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACN,IAAI,EAAC2B,YAAY,CAAE,IAAK,CAAE,CAAC,CACd,CACjB,CACF,CAAC,cACFrB,IAAA,CAACJ,KAAK,EACJuB,IAAI,CAAC,gBAAgB,CACrBC,OAAO,cACLpB,IAAA,CAACG,cAAc,EAAAE,QAAA,cACbL,IAAA,CAACN,IAAI,EAAC2B,YAAY,CAAE,KAAM,CAAE,CAAC,CACf,CACjB,CACF,CAAC,EACI,CAAC,CAEb,CAEA,cAAe,CAAAH,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}